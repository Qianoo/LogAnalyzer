import {
  __privateAdd,
  __privateGet,
  __privateMethod,
  __privateSet
} from "./chunk-3WN6VOBL.js";

// node_modules/@sec-ant/readable-stream/dist/ponyfill/asyncIterator.js
var c = Object.getPrototypeOf(
  Object.getPrototypeOf(
    /* istanbul ignore next */
    async function* () {
    }
  ).prototype
);
var _t, _n, _r, _e, _u_instances, s_fn, i_fn;
var u = class {
  constructor(e, t) {
    __privateAdd(this, _u_instances);
    __privateAdd(this, _t);
    __privateAdd(this, _n);
    __privateAdd(this, _r, false);
    __privateAdd(this, _e);
    __privateSet(this, _t, e), __privateSet(this, _n, t);
  }
  next() {
    const e = () => __privateMethod(this, _u_instances, s_fn).call(this);
    return __privateSet(this, _e, __privateGet(this, _e) ? __privateGet(this, _e).then(e, e) : e()), __privateGet(this, _e);
  }
  return(e) {
    const t = () => __privateMethod(this, _u_instances, i_fn).call(this, e);
    return __privateGet(this, _e) ? __privateGet(this, _e).then(t, t) : t();
  }
};
_t = new WeakMap();
_n = new WeakMap();
_r = new WeakMap();
_e = new WeakMap();
_u_instances = new WeakSet();
s_fn = async function() {
  if (__privateGet(this, _r))
    return {
      done: true,
      value: void 0
    };
  let e;
  try {
    e = await __privateGet(this, _t).read();
  } catch (t) {
    throw __privateSet(this, _e, void 0), __privateSet(this, _r, true), __privateGet(this, _t).releaseLock(), t;
  }
  return e.done && (__privateSet(this, _e, void 0), __privateSet(this, _r, true), __privateGet(this, _t).releaseLock()), e;
};
i_fn = async function(e) {
  if (__privateGet(this, _r))
    return {
      done: true,
      value: e
    };
  if (__privateSet(this, _r, true), !__privateGet(this, _n)) {
    const t = __privateGet(this, _t).cancel(e);
    return __privateGet(this, _t).releaseLock(), await t, {
      done: true,
      value: e
    };
  }
  return __privateGet(this, _t).releaseLock(), {
    done: true,
    value: e
  };
};
var n = Symbol();
function i() {
  return this[n].next();
}
Object.defineProperty(i, "name", { value: "next" });
function o(r) {
  return this[n].return(r);
}
Object.defineProperty(o, "name", { value: "return" });
var l = Object.create(c, {
  next: {
    enumerable: true,
    configurable: true,
    writable: true,
    value: i
  },
  return: {
    enumerable: true,
    configurable: true,
    writable: true,
    value: o
  }
});
function h(r, { preventCancel: e = false } = {}) {
  const t = r.getReader(), a = new u(
    t,
    e
  ), s = Object.create(l);
  return s[n] = a, s;
}
export {
  h as asyncIterator
};
//# sourceMappingURL=@sec-ant_readable-stream_ponyfill_asyncIterator.js.map
